import{a as N}from"./assets/vendor-BEnbeQyM.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const M=N.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:5e3,headers:{"Content-Type":"application/json"}}),x="https://sound-wave.b.goit.study/api";async function I({page:e=1,limit:t=8}={}){try{return(await M.get("/artists",{params:{page:e,limit:t}})).data}catch(n){throw n}}async function B(e){try{return(await N.get(`${x}/artists/${e}`)).data}catch(t){throw console.error(`Failed to fetch artist with ID ${e}:`,t),t}}const S="/Stream116-js-prjt18/assets/icons-DUpbwh8u.svg",m=document.querySelector(".artist-modal-backdrop"),O=m.querySelector(".artist-modal-window"),u=m.querySelector(".artist-modal-content"),y=m.querySelector(".artist-modal-close-btn"),f=document.getElementById("artistModalLoader");function L(e){e.key==="Escape"&&p()}function k(e){e.target===m&&p()}function C(e,t){if(!t)return null;const n=document.createElement("div");n.className="folder-box";const r=document.createElement("h3");r.className="years-title",r.textContent=e;const o=document.createElement("p");return o.className="years-item",o.textContent=t,n.appendChild(r),n.appendChild(o),n}function D(e){if(!e||!Array.isArray(e)||e.length===0)return null;const t=document.createElement("div");return t.className="janr",e.forEach(n=>{const r=document.createElement("p");r.className="janr-item",r.textContent=n,t.appendChild(r)}),t}function P(e){if(!e||isNaN(e))return"--:--";const t=e>1e3?Math.round(e/1e3):e,n=Math.floor(t/60),r=t%60;return`${n}:${r.toString().padStart(2,"0")}`}function $(e){if(!Array.isArray(e)||e.length===0)return[];const t=new Map;return e.forEach(n=>{if(!n.strAlbum)return;t.has(n.strAlbum)||t.set(n.strAlbum,{strAlbum:n.strAlbum,tracks:[]});const r=n.movie||n.strTrackThumb&&n.strTrackThumb.replace("/preview","")||null;t.get(n.strAlbum).tracks.push({strTrack:n.strTrack,intDuration:n.intDuration,strMusicVid:r})}),Array.from(t.values())}function U(e){if(!Array.isArray(e)||e.length===0)return null;const t=document.createElement("div");t.className="tracks-container";const n=document.createElement("ul");return n.className="track-name",n.innerHTML=`
    <li class="name-column-item item-col-1">Track</li>
    <li class="name-column-item item-col-2">Time</li>
    <li class="name-column-item item-col-3">Link</li>
  `,t.appendChild(n),e.forEach((r,o)=>{const s=document.createElement("ul");s.className="track-name";const c=document.createElement("li");c.className="track-name-item item-col-1",c.textContent=r.strTrack||"Untitled";const l=document.createElement("li");l.className="track-name-item item-col-2",l.textContent=P(r.intDuration);const i=document.createElement("li");if(i.className="track-name-item item-col-3",r.strMusicVid){const a=document.createElement("a");a.href=r.strMusicVid,a.target="_blank",a.rel="noopener noreferrer",a.title=`Watch ${r.strTrack} on YouTube`,a.innerHTML=`
        <svg class="icon-youtube" width="24" height="24">
          <use href="${S}#icon-Youtube"></use>
        </svg>
      `,a.className="youtube-link",i.appendChild(a)}s.appendChild(c),s.appendChild(l),s.appendChild(i),t.appendChild(s)}),t}function j(e){if(!Array.isArray(e)||e.length===0)return null;const t=document.createElement("div");t.className="album-box";const n=document.createElement("h2");n.className="album-title",n.textContent="Albums",t.appendChild(n);const r=document.createElement("div");return r.className="albums-grid",e.forEach(o=>{const s=document.createElement("div");s.className="album-title-box";const c=document.createElement("h3");if(c.className="name-album",c.textContent=o.strAlbum||"Untitled Album",s.appendChild(c),o.tracks&&Array.isArray(o.tracks)){const l=U(o.tracks);l&&s.appendChild(l)}t.appendChild(s)}),t}function q(e){u.innerHTML="";const t=$(e.tracksList),n=document.createElement("button");n.className="modal-close-btn",n.type="button",n.innerHTML=`
    <svg class="icon" width="24" height="24">
      <use href="./img/icons.svg#icon-close"></use>
    </svg>
  `,n.addEventListener("click",a=>{p()}),u.appendChild(n);const r=document.createElement("h2");r.className="title-name",r.textContent=e.strArtist,u.appendChild(r);const o=document.createElement("div");if(o.className="artist-info-container",e.strArtistThumb){const a=document.createElement("img");a.className="artist-photo",a.src=e.strArtistThumb,a.alt=e.strArtist,o.appendChild(a)}const s=document.createElement("div");s.className="folder";const c=document.createElement("div");c.className="key-info-container",[{title:"Years active",content:e.intFormedYear?`${e.intFormedYear}â€“present`:void 0},{title:"Sex",content:e.strGender},{title:"Members",content:e.intMembers||"1"},{title:"Country",content:e.strCountry}].forEach(a=>{const h=C(a.title,a.content);h&&c.appendChild(h)}),s.appendChild(c);const i=C("Biography",e.strBiographyEN);if(i&&(i.className="folder-box biography",s.appendChild(i)),e.genres&&Array.isArray(e.genres)){const a=D(e.genres);a&&s.appendChild(a)}if(o.appendChild(s),u.appendChild(o),t.length>0){const a=j(t);a&&u.appendChild(a)}else console.log("No albums data found or invalid format")}async function F(e){try{m.classList.remove("visually-hidden"),document.body.style.overflow="hidden",f&&(f.style.display="block");const t=await B(e);f&&(f.style.display="none"),q(t),document.addEventListener("keydown",L),m.addEventListener("click",k),y&&y.addEventListener("click",p)}catch(t){console.error("Error opening modal:",t),p()}}function p(){document.body.style.overflow="",m.classList.add("visually-hidden"),document.removeEventListener("keydown",L),m.removeEventListener("click",k),y&&y.removeEventListener("click",p),u.innerHTML=""}document.addEventListener("DOMContentLoaded",()=>{window.modalSection=m,window.modalOverlay=O,window.modalContent=u,window.closeModalBtn=y,window.loader=f});const v=8;let A=1,g,d;const H=()=>{const e=document.getElementById("loader");e==null||e.classList.remove("hidden")},R=()=>{const e=document.getElementById("loader");e==null||e.classList.add("hidden")},Y=e=>!e||typeof e!="object"?[]:Array.isArray(e.genres)?e.genres.filter(Boolean):[],_=e=>{const t=document.createElement("li");t.className="artist-card";const n=document.createElement("img");n.src=e.strArtistThumb||"https://placehold.co/150x150/cccccc/333333?text=No+Image",n.alt=e.strArtist||"No Image",n.onerror=function(){this.src="https://placehold.co/150x150/cccccc/333333?text=No+Image",this.alt="No Image Available"},t.appendChild(n);const r=document.createElement("p"),o=Y(e);if(o.length>0){const E=document.createElement("ul");E.classList.add("artist-genres-list"),o.forEach(T=>{const b=document.createElement("li");b.classList.add("genres-list-item"),b.textContent=T,E.appendChild(b)}),r.appendChild(E)}else r.textContent="N/A";t.appendChild(r);const s=document.createElement("h3");s.textContent=e.strArtist||"Unknown Artist",t.appendChild(s);const c=document.createElement("p");c.className="artist-description";const l=e.strBiographyEN||"No short info available.";c.textContent=l.length>200?l.slice(0,200)+"...":l,t.appendChild(c);const i=document.createElement("button");i.className="learn-more-btn",i.textContent="Learn More",i.dataset.artistId=e._id;const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("class","learn-more-icon"),a.setAttribute("width","24"),a.setAttribute("height","24");const h=document.createElementNS("http://www.w3.org/2000/svg","use");return h.setAttribute("href","#icon-caret-right"),a.appendChild(h),i.appendChild(a),t.appendChild(i),t},w=async()=>{H();try{const e=await I({page:A,limit:v}),t=Array.isArray(e==null?void 0:e.artists)?e.artists:[];if(!t.length){d.classList.add("hidden"),d.disabled=!0;return}for(const n of t){const r=await _(n);g.appendChild(r)}A++,t.length<v&&(d.classList.add("hidden"),d.disabled=!0)}catch{alert("Failed to load artists. Please try again later."),d.classList.add("hidden"),d.disabled=!0}finally{R()}},G=()=>{g=document.getElementById("artists"),d=document.getElementById("loadMoreBtn"),!(!g||!d)&&(d.addEventListener("click",w),g.addEventListener("click",e=>{const t=e.target.closest(".learn-more-btn");if(t){const n=t.dataset.artistId;console.log(`Artist clicked: ${n}`),F(n)}}),w())};document.addEventListener("DOMContentLoaded",G);
//# sourceMappingURL=index.js.map
