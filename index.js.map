{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/2-artist.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://sound-wave.b.goit.study/api',\n  timeout: 5000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport async function fetchArtists({ page = 1, limit = 8 } = {}) {\n  try {\n    const response = await api.get('/artists', {\n      params: { page, limit },\n    });\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getArtistById(id) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Failed to fetch artist with ID ${id}:`, error);\n    throw error;\n  }\n}\n\nexport async function getAlbumsByArtistId(artistId) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists/${artistId}/albums`);\n    return response.data;\n  } catch (error) {\n    console.error(`Failed to fetch albums for artist ${artistId}:`, error);\n    throw error;\n  }\n}\n\nexport async function getAlbumById(albumId) {\n  try {\n    const response = await axios.get(`${BASE_URL}/albums/${albumId}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Failed to fetch album with ID ${albumId}:`, error);\n    throw error;\n  }\n}\n","import { fetchArtists } from './api.js';\n\nconst ARTISTS_PER_PAGE = 8;\nlet currentPage = 1;\n\nlet artistListElement;\nlet loadMoreButton;\n\nconst showSpinner = () => {\n  const spinner = document.getElementById('loader');\n  spinner?.classList.remove('hidden');\n};\n\nconst hideSpinner = () => {\n  const spinner = document.getElementById('loader');\n  spinner?.classList.add('hidden');\n};\n\nconst extractGenres = artist => {\n  if (!artist || typeof artist !== 'object') return [];\n  return Array.isArray(artist.genres) ? artist.genres.filter(Boolean) : [];\n};\n\nconst buildArtistCard = artist => {\n  const listItem = document.createElement('li');\n  listItem.className = 'artist-card';\n\n  const image = document.createElement('img');\n  image.src = artist.strArtistThumb || 'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n  image.alt = artist.strArtist || 'No Image';\n  image.onerror = function () {\n    this.src = 'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n    this.alt = 'No Image Available';\n  };\n  listItem.appendChild(image);\n\n  const genresContainer = document.createElement('p');\n  const genreItems = extractGenres(artist);\n  if (genreItems.length > 0) {\n    const genreList = document.createElement('ul');\n    genreList.classList.add('artist-genres-list');\n    genreItems.forEach(tag => {\n      const tagItem = document.createElement('li');\n      tagItem.classList.add('genres-list-item');\n      tagItem.textContent = tag;\n      genreList.appendChild(tagItem);\n    });\n    genresContainer.appendChild(genreList);\n  } else {\n    genresContainer.textContent = 'N/A';\n  }\n  listItem.appendChild(genresContainer);\n\n  const nameElement = document.createElement('h3');\n  nameElement.textContent = artist.strArtist || 'Unknown Artist';\n  listItem.appendChild(nameElement);\n\n  const bioElement = document.createElement('p');\n  bioElement.className = 'artist-description';\n  const biography = artist.strBiographyEN || 'No short info available.';\n  bioElement.textContent = biography.length > 200 ? biography.slice(0, 200) + '...' : biography;\n  listItem.appendChild(bioElement);\n\n  const actionButton = document.createElement('button');\n  actionButton.className = 'learn-more-btn';\n  actionButton.textContent = 'Learn More';\n  actionButton.dataset.artistId = artist._id;\n\n  const svgIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  svgIcon.setAttribute('class', 'learn-more-icon');\n  svgIcon.setAttribute('width', '24');\n  svgIcon.setAttribute('height', '24');\n\n  const useTag = document.createElementNS('http://www.w3.org/2000/svg', 'use');\n  useTag.setAttribute('href', '#icon-caret-right');\n\n  svgIcon.appendChild(useTag);\n  actionButton.appendChild(svgIcon);\n\n  listItem.appendChild(actionButton);\n\n  return listItem;\n};\n\nconst loadMoreArtists = async () => {\n  showSpinner();\n  try {\n    const response = await fetchArtists({ page: currentPage, limit: ARTISTS_PER_PAGE });\n    const artists = Array.isArray(response?.artists) ? response.artists : [];\n\n    if (!artists.length) {\n      loadMoreButton.classList.add('hidden');\n      loadMoreButton.disabled = true;\n      return;\n    }\n\n    for (const artist of artists) {\n      const card = await buildArtistCard(artist);\n      artistListElement.appendChild(card);\n    }\n\n    currentPage++;\n\n    if (artists.length < ARTISTS_PER_PAGE) {\n      loadMoreButton.classList.add('hidden');\n      loadMoreButton.disabled = true;\n    }\n  } catch (err) {\n    alert('Failed to load artists. Please try again later.');\n    loadMoreButton.classList.add('hidden');\n    loadMoreButton.disabled = true;\n  } finally {\n    hideSpinner();\n  }\n};\n\nconst initializeArtistModule = () => {\n  artistListElement = document.getElementById('artists');\n  loadMoreButton = document.getElementById('loadMoreBtn');\n\n  if (!artistListElement || !loadMoreButton) return;\n\n  loadMoreButton.addEventListener('click', loadMoreArtists);\n  artistListElement.addEventListener('click', e => {\n    const targetBtn = e.target.closest('.learn-more-btn');\n    if (targetBtn) {\n      const artistId = targetBtn.dataset.artistId;\n      console.log(`Artist clicked: ${artistId}`);\n    }\n  });\n\n  loadMoreArtists();\n};\n\ndocument.addEventListener('DOMContentLoaded', initializeArtistModule);\n\nexport { initializeArtistModule as initArtistSection };"],"names":["api","axios","fetchArtists","page","limit","error","ARTISTS_PER_PAGE","currentPage","artistListElement","loadMoreButton","showSpinner","spinner","hideSpinner","extractGenres","artist","buildArtistCard","listItem","image","genresContainer","genreItems","genreList","tag","tagItem","nameElement","bioElement","biography","actionButton","svgIcon","useTag","loadMoreArtists","response","artists","card","initializeArtistModule","e","targetBtn","artistId"],"mappings":"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"}